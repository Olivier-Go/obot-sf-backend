{% if pagination is defined %}
    {% if export is not defined %}
        {{ include('_part/_list-controls.html.twig') }}
    {% endif %}
    <div class="card border-primary overflow-hidden">
        <div class="table-responsive overflow-y-hidden">
            <table class="table table-light table-striped table-bordered border-secondary fs-small mb-0">
                <thead class="table-secondary">
                <tr>
                    <th scope="col">{{ knp_pagination_sortable(pagination, '#', 'o.id') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Received', 'o.received') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Ticker', 'o.ticker') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Direction', 'o.direction') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Price diff', 'o.priceDiff') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Buy market', 'buyMarket.name') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Buy price', 'o.buyPrice') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Sell market', 'sellMarket.name') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Sell price', 'o.sellPrice') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Size', 'o.size') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Buy order', 'o.buyOrder') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Sell Order', 'o.sellOrder') }}</th>
                    <th scope="col">{{ knp_pagination_sortable(pagination, 'Logs', 'o.logs') }}</th>
                </tr>
                </thead>
                <tbody data-controller="opportunity">
                {% for opportunity in pagination %}
                    <tr>
                        <th scope="row">{{ opportunity.id }}</th>
                        <td>{{ opportunity.received|date('d/m/Y H:i:s') }}</td>
                        <td>{{ opportunity.ticker }}</td>
                        <td><span class="text-{{ opportunity.direction == 'Sell->Buy' ? 'danger' : 'success' }}">{{ opportunity.direction|upper }}</span></td>
                        <td>{{ opportunity.priceDiff|number_format(4, '.', ' ') }}</td>
                        <td>{{ opportunity.buyMarket|upper }}</td>
                        <td>{{ opportunity.buyPrice|number_format(4, '.', ' ') }}</td>
                        <td>{{ opportunity.sellMarket|upper }}</td>
                        <td>{{ opportunity.sellPrice|number_format(4, '.', ' ') }}</td>
                        <td>{{ opportunity.size|number_format(4, '.', ' ') }}</td>
                        <td class="text-center">
                            {% if opportunity.buyOrder %}
                                <button type="button" class="btn btn-sm btn-link py-0" data-action="opportunity#order" data-opportunity-order-id="{{ opportunity.buyOrder.id }}">#{{ opportunity.buyOrder.id }}</button>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if opportunity.sellOrder %}
                                <button type="button" class="btn btn-sm btn-link py-0" data-action="opportunity#order" data-opportunity-order-id="{{ opportunity.sellOrder.id }}">#{{ opportunity.sellOrder.id }}</button>
                            {% endif %}
                        </td>
                        <td class="text-center">
                            {% if opportunity.logs is not null %}
                                <button type="button" class="btn btn-sm btn-link py-0" data-action="opportunity#log" data-opportunity-log-id="{{ opportunity.id }}"><i class="bi bi-journal-text"></i></button>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="navigation d-flex justify-content-center my-3 d-print-none">
        {{ knp_pagination_render(pagination) }}
    </div>
{% endif %}